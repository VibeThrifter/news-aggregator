# Story 1.12: Add NineForNews as News Source

**Story ID:** 1.12
**Epic ID:** Epic 1 â€“ RSS Ingestion & NLP Enrichment
**Status:** Done

## Objective

Add NineForNews.nl as a news source to further expand viewpoint diversity with an alternative/critical media perspective. NineForNews positions itself as "Vrij en onafhankelijk nieuws" (Free and independent news) and covers topics often underrepresented in mainstream media.

## Background/Context

- **Source:** NineForNews.nl (also known as 9ForNews)
- **Tagline:** "Vrij en onafhankelijk nieuws" (Free and independent news)
- **RSS Feed:** `https://www.ninefornews.nl/feed/` (WordPress RSS 2.0, verified working)
- **Platform:** WordPress with LiteSpeed caching, behind Cloudflare
- **Update Frequency:** Hourly (multiple posts per day)
- **Fetch Strategy:** Simple should work (WordPress site, standard HTML)
- **Paywall:** None observed - content appears freely accessible
- **Value:** Alternative perspective on Dutch and international news, critical of mainstream media narratives
- **Editorial Stance:** Alternative/critical media, questions mainstream narratives, covers topics like government policy, EU, farmers' protests, geopolitics

### RSS Feed Analysis

```
Feed URL: https://www.ninefornews.nl/feed/
Content-Type: application/rss+xml; charset=UTF-8
Status: 200 OK
Platform: WordPress with LiteSpeed
Language: nl-NL
Update: Hourly
CDN: Cloudflare
```

### Sample RSS Entry Structure

- `<title>` - Article title
- `<link>` - Article URL
- `<dc:creator>` - Author name (e.g., "Robin de Boer", "NineForNews")
- `<pubDate>` - Publication date (RFC 2822 format)
- `<category>` - Multiple categories/tags (e.g., "Binnenland", "Buitenland", "Great Reset", "Wetenschap")
- `<guid>` - Unique identifier (WordPress post ID based, e.g., `https://www.ninefornews.nl/?p=235431`)
- `<description>` - HTML with featured image and excerpt
- `<slash:comments>` - Comment count
- `<wfw:commentRss>` - Comment feed URL

Note: Unlike De Andere Krant, NineForNews does NOT include `<content:encoded>` with full article text in the RSS feed. Full article fetch is required.

### Sample Categories Observed

- Binnenland (Domestic)
- Buitenland (International)
- Mens en Dier (Humans and Animals)
- Great Reset
- Wetenschap (Science)

## Acceptance Criteria (AC)

- [x] Given the NineForNews RSS feed URL when the scheduler polls, then new articles are discovered and stored in the database.
- [x] Given a NineForNews article URL when fetched, then full article text is extracted (>500 chars typical).
- [x] Given NineForNews articles in the database when event clustering runs, then they are clustered with articles from other sources on the same topic.
- [x] Given existing sources when NineForNews is added, then they continue working without regression.

## Subtask Checklist

### Research & Testing
- [x] Test RSS feed parsing with existing feed reader infrastructure
- [x] Test article fetch with simple httpx (WordPress sites typically don't need JS)
- [x] Test trafilatura extraction on article pages
- [x] Verify Cloudflare doesn't block simple requests (User-Agent may be needed) - **Note: Cloudflare blocks simple requests, using Playwright**

### Implementation
- [x] Create `backend/app/feeds/ninefornews.py` - Feed reader class
- [x] Add `rss_ninefornews_url` to `backend/app/core/config.py`
- [x] Add `ninefornews_rss` source profile to `source_profiles.yaml`
- [x] Register reader in `backend/app/services/ingest_service.py`

### Feed Reader Details
```python
# backend/app/feeds/ninefornews.py
class NineForNewsRssReader(FeedReader):
    @property
    def id(self) -> str:
        return "ninefornews_rss"

    @property
    def source_metadata(self) -> Dict[str, Any]:
        return {
            "name": "NineForNews",
            "spectrum": "alternative",
            "country": "NL",
            "language": "nl",
            "media_type": "alternative_online"
        }
```

### Source Profile
```yaml
ninefornews_rss:
  feed_url: https://www.ninefornews.nl/feed/
  fetch_strategy: simple
  user_agent: Mozilla/5.0 (compatible; News360Fetcher/1.0)
  parser: trafilatura
  cookie_ttl_minutes: 0
```

Note: Custom User-Agent may be needed due to Cloudflare. If simple fetch fails, fall back to `fetch_strategy: playwright`.

### Testing & Validation
- [x] Update unit tests in `backend/tests/unit/test_feeds.py` (reader counts)
- [x] Test manual ingestion: `curl -X POST localhost:8000/admin/trigger/poll-feeds`
- [x] Verify articles stored in database with proper metadata
- [x] Verify article content quality (>500 chars)
- [x] Verify articles cluster with same-topic articles from other sources

## Testing Requirements

- **Manual test:** Fetch sample NineForNews article, verify content extraction
- **HTTP test:** Verify simple fetch works (Cloudflare may require proper headers)
- **Integration test:** Run ingestion cycle, verify articles in database
- **Clustering test:** Verify articles cluster with mainstream sources covering same topics (e.g., farmers' protests, EU policy)
- **Definition of Done:** NineForNews articles successfully ingested and clustered

## Technical Notes

- WordPress RSS feed does NOT include full content - separate HTTP fetch is required
- Cloudflare CDN in front - may need proper User-Agent header to avoid blocks
- LiteSpeed caching - content should be fast to fetch
- Articles appear to be substantial length (not just short posts)
- Topics often overlap with mainstream coverage (politics, EU, farmers, climate) - good for clustering

### Content Characteristics

- **Style:** Critical/investigative, questions mainstream narratives
- **Topics:** Dutch politics, EU, farmers, geopolitics, science, "Great Reset"
- **Overlap with mainstream:** High on topics like farmers' protests, EU policy, Dutch politics
- **Unique angles:** Alternative perspectives on same news events

### Cloudflare Considerations

The site uses Cloudflare. If simple fetch fails with 403:
1. First try adding realistic User-Agent header
2. If that fails, switch to `fetch_strategy: playwright`
3. Handle any cookie consent if present

## Dependencies

- Story 1.4 (Playwright scraping) - available if needed
- Existing RSS ingestion pipeline - operational
- De Andere Krant implementation (Story 1.10) - similar pattern to follow

## Risks & Considerations

- **Cloudflare blocking:** May need Playwright if simple fetch blocked
- **Content style:** Alternative viewpoints may cluster differently than expected
- **Topics overlap:** Should cluster well with mainstream on common topics (farmers, EU, politics)
- **Comment-heavy:** Site has active comments section - ensure trafilatura extracts only article content

## Story Wrap Up

- **Agent Model Used:** Claude Opus 4.5
- **Date/Time Completed:** 2025-12-07
- **Commit Hash:** (pending commit)
- **Change Log:**
  - Created `backend/app/feeds/ninefornews.py` - NineForNewsRssReader class
  - Added `rss_ninefornews_url` to `backend/app/core/config.py`
  - Added `ninefornews_rss` source profile to `source_profiles.yaml` with Playwright fetch strategy (Cloudflare blocks simple requests)
  - Registered NineForNews reader in `backend/app/services/ingest_service.py`
  - Updated unit tests in `backend/tests/unit/test_feeds.py` (reader counts from 8 to 12)
  - All 20 unit tests pass
