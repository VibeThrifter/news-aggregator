# Story 1.7: Add de Volkskrant as News Source

**Story ID:** 1.7
**Epic ID:** Epic 1 â€“ RSS Ingestion & NLP Enrichment
**Status:** Active

## Objective

Add de Volkskrant as a news source to include quality newspaper perspective with center-left editorial stance, increasing viewpoint diversity.

## Background/Context

- **Source:** de Volkskrant is a major Dutch quality newspaper (DPG Media)
- **RSS Feed:** `https://www.volkskrant.nl/voorpagina/rss.xml` - Valid RSS feed (200 OK, content-type: application/rss+xml)
- **Fetch Strategy:** To be determined - test if simple HTTP works or if Playwright/consent handling needed
- **Paywall:** Has premium articles behind paywall, but RSS feed available
- **Value:** Quality journalism, center-left perspective, complements Telegraaf's populist stance
- **Publisher:** DPG Media (same as NU.nl, AD.nl)
- **Reference:** `source_profiles.yaml`, existing DPG consent handling in NU.nl profile

### RSS Feed Analysis

```
Feed URL: https://www.volkskrant.nl/voorpagina/rss.xml
Content-Type: application/rss+xml;charset=UTF-8
Status: 200 OK
```

## Acceptance Criteria (AC)

- [ ] Given the Volkskrant RSS feed URL when the scheduler polls, then new articles are discovered and stored in the database.
- [ ] Given a non-premium Volkskrant article URL when fetched, then full article text is extracted (>500 chars typical).
- [ ] Given a premium Volkskrant article URL when fetched, then system gracefully handles paywall (use RSS summary or skip).
- [ ] Given DPG consent dialog when fetching, then consent is automatically handled (reuse NU.nl patterns).
- [ ] Given Volkskrant articles in the database when event clustering runs, then they are clustered with articles from other sources.
- [ ] Given existing sources when Volkskrant is added, then they continue working without regression.

## Subtask Checklist

### Research & Testing
- [ ] Test RSS feed parsing with existing feed reader
- [ ] Test article fetch with simple httpx (check if JS rendering needed)
- [ ] Test if DPG consent flow (like NU.nl) applies
- [ ] Identify paywall detection method (page content or HTTP response)

### Configuration
- [ ] Add `volkskrant_rss` source profile to `source_profiles.yaml`
- [ ] Configure appropriate fetch strategy based on testing
- [ ] Set appropriate user agent header
- [ ] Configure consent handling if needed (may reuse NU.nl pattern)

### Paywall Handling
- [ ] Implement paywall detection for Volkskrant articles
- [ ] Graceful fallback to RSS summary for premium articles
- [ ] Log paywall encounters for monitoring

### Testing & Validation
- [ ] Test article fetch with non-premium article
- [ ] Test paywall handling with premium article
- [ ] Run manual ingestion to verify articles are stored
- [ ] Verify articles cluster with same-topic articles from other sources

## Testing Requirements

- **Manual test:** Fetch sample Volkskrant article, verify content extraction
- **Paywall test:** Verify graceful handling of premium articles
- **Integration test:** Run ingestion cycle, verify articles in database
- **Clustering test:** Verify articles cluster with other sources
- **Definition of Done:** Volkskrant articles (non-premium) successfully ingested and clustered

## Technical Notes

- DPG Media ownership means consent flow may be similar to NU.nl
- Start with testing simple HTTP fetch before adding complexity
- If Playwright needed, reuse existing browser pool from Story 1.4
- Premium detection: Check for paywall indicators in page content
- Consider rate limiting to be respectful to DPG infrastructure

## Dependencies

- Story 1.4 (Playwright scraping) - complete (if needed)
- Story 1.2.1 (consent-aware fetch) - complete
- Existing RSS ingestion pipeline - operational

## Story Wrap Up (To be filled in AFTER agent execution)

- **Agent Model Used:** _pending_
- **Agent Credit or Cost:** _pending_
- **Date/Time Completed:** _pending_
- **Commit Hash:** _pending_
- **Change Log:** _pending_
