# Story 1.9: Add Trouw as News Source

**Story ID:** 1.9
**Epic ID:** Epic 1 â€“ RSS Ingestion & NLP Enrichment
**Status:** Active

## Objective

Add Trouw as a news source to include quality newspaper perspective with Christian-progressive editorial heritage, increasing viewpoint diversity.

## Background/Context

- **Source:** Trouw is a Dutch quality newspaper with Protestant Christian roots (DPG Media)
- **RSS Feed:** `https://www.trouw.nl/rss.xml` (to be verified)
- **Fetch Strategy:** To be determined - likely similar to Volkskrant (same publisher)
- **Paywall:** Has premium articles behind paywall
- **Value:** Quality journalism, ethical/moral perspective, religion coverage, sustainability focus
- **Publisher:** DPG Media (same as NU.nl, AD.nl, Volkskrant, Parool)
- **Reference:** `source_profiles.yaml`, Story 1.7 (Volkskrant - same publisher)

### RSS Feed Analysis

```
Feed URL: https://www.trouw.nl/rss.xml (verify)
Alternative: https://www.trouw.nl/voorpagina/rss.xml
Publisher: DPG Media
```

## Acceptance Criteria (AC)

- [ ] Given the Trouw RSS feed URL when the scheduler polls, then new articles are discovered and stored in the database.
- [ ] Given a non-premium Trouw article URL when fetched, then full article text is extracted (>500 chars typical).
- [ ] Given a premium Trouw article URL when fetched, then system gracefully handles paywall (use RSS summary or skip).
- [ ] Given DPG consent dialog when fetching, then consent is automatically handled.
- [ ] Given Trouw articles in the database when event clustering runs, then they are clustered with articles from other sources.
- [ ] Given existing sources when Trouw is added, then they continue working without regression.

## Subtask Checklist

### Research & Testing
- [ ] Verify RSS feed URL exists and returns valid feed
- [ ] Test RSS feed parsing with existing feed reader
- [ ] Test article fetch with simple httpx (check if JS rendering needed)
- [ ] Test if DPG consent flow applies (reuse Volkskrant findings)

### Configuration
- [ ] Add `trouw_rss` source profile to `source_profiles.yaml`
- [ ] Configure fetch strategy (likely same as Volkskrant)
- [ ] Set appropriate user agent header
- [ ] Configure consent handling (reuse DPG pattern)

### Paywall Handling
- [ ] Implement paywall detection (reuse Volkskrant pattern if applicable)
- [ ] Graceful fallback to RSS summary for premium articles
- [ ] Log paywall encounters for monitoring

### Testing & Validation
- [ ] Test article fetch with non-premium article
- [ ] Test paywall handling with premium article
- [ ] Run manual ingestion to verify articles are stored
- [ ] Verify articles cluster with same-topic articles from other sources

## Testing Requirements

- **Manual test:** Fetch sample Trouw article, verify content extraction
- **Paywall test:** Verify graceful handling of premium articles
- **Integration test:** Run ingestion cycle, verify articles in database
- **Clustering test:** Verify articles cluster with other sources
- **Definition of Done:** Trouw articles (non-premium) successfully ingested and clustered

## Technical Notes

- Same DPG Media infrastructure as Volkskrant/Parool - implementation should be very similar
- Leverage learnings from Story 1.7 (Volkskrant) and Story 1.8 (Parool)
- Unique editorial perspective on ethics, religion, and sustainability topics
- Consider implementing after Volkskrant to reuse patterns

## Dependencies

- Story 1.7 (Volkskrant) - recommended to complete first for DPG pattern reuse
- Story 1.4 (Playwright scraping) - complete (if needed)
- Existing RSS ingestion pipeline - operational

## Story Wrap Up (To be filled in AFTER agent execution)

- **Agent Model Used:** _pending_
- **Agent Credit or Cost:** _pending_
- **Date/Time Completed:** _pending_
- **Commit Hash:** _pending_
- **Change Log:** _pending_
