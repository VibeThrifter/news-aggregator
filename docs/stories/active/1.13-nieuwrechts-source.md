# Story 1.13: Add NieuwRechts as News Source

**Story ID:** 1.13
**Epic ID:** Epic 1 â€“ RSS Ingestion & NLP Enrichment
**Status:** Active

## Objective

Add NieuwRechts as a news source to include right-wing media perspective, increasing viewpoint diversity with a source that provides an explicit right-wing political viewpoint on Dutch news.

## Background/Context

- **Source:** NieuwRechts is a Dutch right-wing online news platform
- **RSS Feed:** `https://nieuwrechts.nl/rss` (verified working)
- **Update Frequency:** Multiple times daily
- **Fetch Strategy:** Simple (standard RSS 2.0 feed)
- **Paywall:** None observed - content appears freely accessible
- **Value:** Right-wing perspective, covers politics, migration, EU policy from conservative viewpoint
- **Editorial Stance:** Right-wing, critical of EU, focus on migration policy, national sovereignty

### RSS Feed Analysis

```
Feed URL: https://nieuwrechts.nl/rss
Content-Type: application/rss+xml
Status: 200 OK
Language: NL-nl
```

### Sample RSS Entry Structure

- `<title>` - Article title
- `<link>` - Article URL
- `<guid>` - Unique identifier (URL-based)
- `<category>` - Category (e.g., "Nieuws", "Achtergronden")
- `<pubDate>` - Publication date
- `<description>` - Article excerpt/summary (HTML)
- `<enclosure>` - Article image (jpg)

## Acceptance Criteria (AC)

- [x] Given the NieuwRechts RSS feed URL when the scheduler polls, then new articles are discovered and stored in the database.
- [ ] Given a NieuwRechts article URL when fetched, then full article text is extracted (>500 chars typical).
- [ ] Given NieuwRechts articles in the database when event clustering runs, then they are clustered with articles from other sources on the same topic.
- [ ] Given existing sources when NieuwRechts is added, then they continue working without regression.

## Subtask Checklist

### Research & Testing
- [x] Test RSS feed parsing with curl (verified working)
- [x] Test article fetch with simple httpx
- [x] Verify content extraction with trafilatura

### Implementation
- [x] Create `backend/app/feeds/nieuwrechts.py` - Feed reader class
- [x] Add `rss_nieuwrechts_url` to `backend/app/core/config.py`
- [x] Add `nieuwrechts_rss` source profile to `source_profiles.yaml`
- [x] Register reader in `backend/app/services/ingest_service.py`

### Feed Reader Details
```python
# backend/app/feeds/nieuwrechts.py
class NieuwRechtsRssReader(FeedReader):
    @property
    def id(self) -> str:
        return "nieuwrechts_rss"

    @property
    def source_metadata(self) -> Dict[str, Any]:
        return {
            "name": "NieuwRechts",
            "spectrum": "right-wing",
            "country": "NL",
            "language": "nl",
            "media_type": "online_news"
        }
```

### Source Profile
```yaml
nieuwrechts_rss:
  feed_url: https://nieuwrechts.nl/rss
  fetch_strategy: playwright
  user_agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36
  parser: trafilatura
  requires_js: true
  cookie_ttl_minutes: 0
  # Note: NieuwRechts is an Angular SPA - requires Playwright for full article content
```

### Testing & Validation
- [x] Update unit tests in `backend/tests/unit/test_feeds.py` (reader counts: 12)
- [ ] Test manual ingestion: `curl -X POST localhost:8000/admin/trigger/poll-feeds`
- [ ] Verify articles stored in database with proper metadata
- [ ] Verify article content quality (>500 chars)
- [ ] Verify articles cluster with same-topic articles from other sources

## Testing Requirements

- **Manual test:** Fetch sample NieuwRechts article, verify content extraction
- **RSS test:** Verify RSS description provides usable summary
- **Integration test:** Run ingestion cycle, verify articles in database
- **Clustering test:** Verify articles cluster with sources covering same topics
- **Definition of Done:** NieuwRechts articles successfully ingested and clustered

## Technical Notes

- Standard RSS 2.0 feed with enclosure for images
- Simple fetch strategy should work (no JS rendering needed)
- Description field contains HTML summary - needs cleaning
- Categories available for classification

### Spectrum Classification

NieuwRechts classified as `right-wing`:
- Current values: `center`, `center-left`, `center-right`, `alternative`, `right-wing`
- Explicit right-wing political stance

## Dependencies

- Existing RSS ingestion pipeline - operational
- No specific dependencies on other stories

## Risks & Considerations

- **Content Style:** Political news focus, may have opinion-heavy content
- **Clustering:** Right-wing viewpoints should cluster with mainstream coverage of same events
- **Volume:** Active publication, expect multiple articles per day

## Story Wrap Up

- **Agent Model Used:** Claude Opus 4.5
- **Agent Credit or Cost:** ~$0.50
- **Date/Time Completed:** 2025-12-07
- **Commit Hash:** _pending user commit_
- **Change Log:**
  - Created `backend/app/feeds/nieuwrechts.py` - Feed reader class
  - Added `rss_nieuwrechts_url` to `backend/app/core/config.py`
  - Added `nieuwrechts_rss` source profile to `source_profiles.yaml` (Playwright strategy)
  - Registered reader in `backend/app/services/ingest_service.py`
  - Updated unit tests in `backend/tests/unit/test_feeds.py` (12 readers)
  - Added "Toestaan" cookie consent button to `playwright_fetch.py`
