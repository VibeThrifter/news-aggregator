# Story 1.10: Add De Andere Krant as News Source

**Story ID:** 1.10
**Epic ID:** Epic 1 â€“ RSS Ingestion & NLP Enrichment
**Status:** Active

## Objective

Add De Andere Krant as a news source to include critical/alternative media perspective, significantly increasing viewpoint diversity with a source that explicitly positions itself as counterweight to mainstream media.

## Background/Context

- **Source:** De Andere Krant is a Dutch alternative weekly newspaper
- **Tagline:** "Want er is meer aan de hand" (Because there's more going on)
- **RSS Feed:** `https://deanderekrant.nl/feed/` (WordPress RSS 2.0, verified working)
- **Platform:** WordPress 6.9
- **Update Frequency:** Hourly
- **Fetch Strategy:** Likely simple (WordPress site, no JS rendering expected)
- **Paywall:** None observed - content appears freely accessible
- **Value:** Alternative/critical perspective, questions mainstream narratives, fills gap in viewpoint diversity
- **Editorial Stance:** Critical of mainstream media, questions government policy, provides alternative viewpoints

### RSS Feed Analysis

```
Feed URL: https://deanderekrant.nl/feed/
Content-Type: application/rss+xml; charset=UTF-8
Status: 200 OK (via redirect from /rss)
Platform: WordPress 6.9
Language: nl-NL
Update: Hourly
```

### Sample RSS Entry Structure

- `<title>` - Article title
- `<link>` - Article URL
- `<dc:creator>` - Author name (e.g., "Karel Beckman")
- `<pubDate>` - Publication date
- `<category>` - Tags (e.g., "Nieuws", "Media")
- `<guid>` - Unique identifier (WordPress post ID based)
- `<description>` - Short excerpt
- `<content:encoded>` - Full HTML content (includes article text)

## Acceptance Criteria (AC)

- [ ] Given the De Andere Krant RSS feed URL when the scheduler polls, then new articles are discovered and stored in the database.
- [ ] Given a De Andere Krant article URL when fetched, then full article text is extracted (>500 chars typical).
- [ ] Given the RSS `<content:encoded>` field contains full article, then this can be used as primary content source.
- [ ] Given De Andere Krant articles in the database when event clustering runs, then they are clustered with articles from other sources on the same topic.
- [ ] Given existing sources when De Andere Krant is added, then they continue working without regression.

## Subtask Checklist

### Research & Testing
- [ ] Test RSS feed parsing with existing feed reader infrastructure
- [ ] Test article fetch with simple httpx (WordPress sites typically don't need JS)
- [ ] Verify content extraction from `<content:encoded>` (may not need separate fetch)
- [ ] Test trafilatura extraction on article pages as backup

### Implementation
- [ ] Create `backend/app/feeds/anderekrant.py` - Feed reader class
- [ ] Add `rss_anderekrant_url` to `backend/app/core/config.py`
- [ ] Add `anderekrant_rss` source profile to `source_profiles.yaml`
- [ ] Register reader in `backend/app/services/ingest_service.py`

### Feed Reader Details
```python
# backend/app/feeds/anderekrant.py
class AndereKrantRssReader(FeedReader):
    @property
    def id(self) -> str:
        return "anderekrant_rss"

    @property
    def source_metadata(self) -> Dict[str, Any]:
        return {
            "name": "De Andere Krant",
            "spectrum": "alternative",  # New category for alternative media
            "country": "NL",
            "language": "nl",
            "media_type": "alternative_weekly"
        }
```

### Source Profile
```yaml
anderekrant_rss:
  feed_url: https://deanderekrant.nl/feed/
  fetch_strategy: simple
  user_agent: News360Fetcher/1.0 (+https://github.com/news-aggregator)
  parser: trafilatura
  cookie_ttl_minutes: 0
```

### Testing & Validation
- [ ] Update unit tests in `backend/tests/unit/test_feeds.py` (reader counts)
- [ ] Test manual ingestion: `curl -X POST localhost:8000/admin/trigger/poll-feeds`
- [ ] Verify articles stored in database with proper metadata
- [ ] Verify article content quality (>500 chars)
- [ ] Verify articles cluster with same-topic articles from other sources

## Testing Requirements

- **Manual test:** Fetch sample De Andere Krant article, verify content extraction
- **RSS test:** Verify `<content:encoded>` provides full article text
- **Integration test:** Run ingestion cycle, verify articles in database
- **Clustering test:** Verify articles cluster with mainstream sources covering same topics
- **Definition of Done:** De Andere Krant articles successfully ingested and clustered

## Technical Notes

- WordPress RSS feeds often include full content in `<content:encoded>` - may not need separate HTTP fetch
- Consider using RSS content directly to reduce HTTP requests and avoid potential issues
- No paywall detected - all content appears freely accessible
- Simple fetch strategy should work (no JS rendering needed)
- Update frequency is hourly according to RSS metadata

### Spectrum Classification

De Andere Krant requires a new spectrum value:
- Current values: `center`, `center-left`, `center-right`
- Proposed: `alternative` - for media that explicitly positions itself as alternative to mainstream

Alternative approach: use `right` or `populist-right` if the editorial stance analysis suggests this is more accurate.

## Dependencies

- Story 1.4 (Playwright scraping) - complete (likely not needed)
- Existing RSS ingestion pipeline - operational
- No specific dependencies on other stories

## Risks & Considerations

- **Content Style:** Articles may have different structure than mainstream sources
- **Clustering:** Critical/alternative viewpoints may cluster less frequently with mainstream coverage
- **Volume:** Weekly publication means fewer articles than daily sources
- **Quality:** Verify trafilatura works well with WordPress content structure

## Story Wrap Up

- **Agent Model Used:** Claude Opus 4.5
- **Agent Credit or Cost:** ~$0.50
- **Date/Time Completed:** 2025-12-06
- **Commit Hash:** _pending user commit_
- **Change Log:**
  - Created `backend/app/feeds/anderekrant.py` - Feed reader class
  - Added `rss_anderekrant_url` to `backend/app/core/config.py`
  - Added `anderekrant_rss` source profile to `source_profiles.yaml`
  - Registered reader in `backend/app/services/ingest_service.py`
  - Updated unit tests in `backend/tests/unit/test_feeds.py` (7 readers)
  - Verified: 10 articles ingested with 8000-17000 chars content each
