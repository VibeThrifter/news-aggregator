# Story 1.14 â€“ De Dagelijkse Standaard als nieuwsbron

## Overzicht

| Veld         | Waarde                                         |
|--------------|------------------------------------------------|
| Story ID     | 1.14                                           |
| Titel        | De Dagelijkse Standaard als nieuwsbron toevoegen |
| Epic         | 1 â€“ Multi-Source Ingestion                     |
| Status       | ðŸ“‹ Backlog (Nice to Have)                      |
| Geschat      | M (medium) - complexer door ontbrekende RSS    |
| Prerequisite | Story 1.1 (RSS Ingestion), Story 1.4 (Playwright) |

---

## Doel

De Dagelijkse Standaard (DDS) toevoegen als nieuwsbron om een conservatieve, rechtse stem in het pluralistische nieuws-overzicht te brengen. DDS biedt opiniÃ«rend nieuws vanuit rechts perspectief.

---

## Context & Onderzoek

### Website Details

| Eigenschap     | Waarde                                    |
|----------------|-------------------------------------------|
| Website URL    | `https://www.dagelijksestandaard.nl`      |
| RSS Feed       | **Niet beschikbaar**                      |
| Sitemap        | `https://www.dagelijksestandaard.nl/sitemap.xml` (beschikbaar) |
| Platform       | Next.js                                   |
| Cloudflare     | Ja                                        |

### Technische Uitdaging

De Dagelijkse Standaard heeft **geen RSS/Atom feed**. Dit maakt integratie complexer:

1. **Sitemap-based scraping** nodig in plaats van RSS parsing
2. Sitemap bevat alleen URLs, geen titels of samenvattingen
3. Elke artikel-URL moet apart worden opgehaald
4. Cloudflare bescherming vereist Playwright

### Content Kenmerken

- **Stijl**: OpiniÃ«rend, conservatief
- **Onderwerpen**: Politiek, maatschappij, immigratie, EU-kritiek
- **Toon**: Direct, kritisch op mainstream media
- **Relevantie**: Biedt rechts-conservatief perspectief

---

## Acceptatiecriteria

- [ ] **AC-1**: Sitemap wordt succesvol geparsed voor artikel-URLs
- [ ] **AC-2**: Nieuwe artikelen worden gedetecteerd (op basis van lastmod of URL-patroon)
- [ ] **AC-3**: Full-text content wordt opgehaald via Playwright
- [ ] **AC-4**: Artikelen worden correct geclusterd met gerelateerde events
- [ ] **AC-5**: Source profile toegevoegd aan `source_profiles.yaml`
- [ ] **AC-6**: Tenminste 5 artikelen zichtbaar in database na poll cyclus

---

## Subtaken

### 1. Sitemap Parser
- [ ] Maak `backend/app/feeds/dagelijksestandaard.py` met sitemap parser
- [ ] Implementeer URL-filtering voor alleen nieuwsartikelen
- [ ] Implementeer lastmod-tracking om alleen nieuwe artikelen te fetchen
- [ ] Sla laatst geziene URLs op om duplicaten te voorkomen

### 2. Article Fetcher
- [ ] Gebruik Playwright voor article content fetching
- [ ] Implementeer content selectors voor DDS artikel-structuur
- [ ] Extraheer titel, auteur, publicatiedatum, content

### 3. Feed Configuratie
- [ ] Voeg config entry toe aan `backend/app/core/config.py`
- [ ] Voeg source profile toe aan `source_profiles.yaml`

### 4. Integratie
- [ ] Registreer reader in IngestService
- [ ] Unit tests voor sitemap parser
- [ ] Integration tests met mock sitemap

---

## Technische Aanpak

### Sitemap Parsing

```python
# Pseudo-code voor sitemap-based ingestion
async def fetch_from_sitemap(sitemap_url: str) -> list[ArticleData]:
    # 1. Fetch sitemap.xml
    # 2. Parse XML voor <url> entries
    # 3. Filter op artikel-URLs (bijv. /2025/12/artikel-slug)
    # 4. Check lastmod tegen laatst bekende datum
    # 5. Fetch nieuwe artikel-URLs via Playwright
    # 6. Return ArticleData objecten
```

### URL Filtering

Artikel-URLs volgen waarschijnlijk patroon:
- `https://www.dagelijksestandaard.nl/2025/12/07/artikel-slug/`
- Negeer categorie-pagina's, tag-pagina's, etc.

---

## Risico's & Mitigatie

| Risico | Impact | Mitigatie |
|--------|--------|-----------|
| Geen RSS feed | Hoog | Sitemap-based approach |
| Cloudflare blocking | Hoog | Playwright met realistic headers |
| Sitemap structuur wijzigt | Medium | Robuuste XML parsing |
| Veel irrelevante URLs in sitemap | Medium | Strict URL-pattern filtering |
| Rate limiting | Medium | Respecteer robots.txt, add delays |

---

## Alternatieve Bronnen

Als sitemap-scraping te complex blijkt, overweeg deze alternatieven met RSS:
- GeenStijl (al toegevoegd)
- NieuwRechts (al toegevoegd)
- NineForNews (al toegevoegd)
- TPO (The Post Online) - heeft mogelijk RSS

---

## Prioriteit

**Nice to Have** - De toegevoegde waarde is beperkt gezien:
1. Technische complexiteit (geen RSS)
2. Al meerdere rechtse bronnen beschikbaar (GeenStijl, NieuwRechts, NineForNews)
3. Sitemap-scraping is minder betrouwbaar dan RSS

Implementeer alleen als er specifieke behoefte is aan DDS content of als proof-of-concept voor sitemap-based ingestion.

---

## Definition of Done

- [ ] Alle acceptatiecriteria voldaan
- [ ] Sitemap parser robuust en getest
- [ ] Code volgt bestaande patterns
- [ ] Geen nieuwe linting errors
- [ ] Handmatige verificatie: artikelen correct in database
